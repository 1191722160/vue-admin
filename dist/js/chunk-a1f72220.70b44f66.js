(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1f72220"],{"1b45":function(t,i,n){"use strict";var e=n("70d4"),o=n.n(e);o.a},"1d8e":function(t,i,n){},"298d":function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("section",[n("Card",{attrs:{title:"桌面通知"}},[n("div",{staticClass:"center",attrs:{slot:"center"},slot:"center"},[n("div",[t.state?t._e():n("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n                    浏览器通知权限\n                    "),n("template",{slot:"desc"},[t._v("\n                        禁用状态,请先打开通知权限一般在浏览器地址栏输入框前方\n                    ")])],2),t.state?n("Alert",{attrs:{type:"success","show-icon":""}},[t._v("\n                    浏览器通知权限\n                    "),n("template",{slot:"desc"},[t._v("\n                        开启状态\n                    ")])],2):t._e(),n("Button",{staticClass:"custom-btn",attrs:{type:"success",disabled:!t.state},on:{click:function(i){return t.pushMessage()}}},[t._v("发送通知")])],1)])])],1)},o=[],s=n("6fcb"),r=n("b730"),c=n.n(r),a={components:{Card:s["a"]},data:function(){return{state:!1}},created:function(){this.state=c.a.Permission.has()},mounted:function(){var t=this;c.a.Permission.request(function(){},function(){t.$Notice.warning({title:"通知权限",desc:"通知权限为禁用状态"})})},methods:{pushMessage:function(){var t=this;c.a.create("嗨，你好",{body:"我是vipbic，你收到了1条新的通知",icon:"https://www.vipbic.com/public/img/logo.png",onClick:function(){window.focus(),t.successMessage()}})},successMessage:function(){this.$Notice.success({title:"通知提醒",desc:"您刚点了通知提醒"})}}},u=a,f=(n("2a06"),n("2877")),l=Object(f["a"])(u,e,o,!1,null,"0b92c72a",null);i["default"]=l.exports},"2a06":function(t,i,n){"use strict";var e=n("1d8e"),o=n.n(e);o.a},"6fcb":function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("section",{staticClass:"card"},[n("div",{staticClass:"top"},[t._t("top",[t._m(0),n("div",{staticClass:"title"},[n("span",{staticClass:"ft14"},[t._v(t._s(t.title))])])])],2),n("div",{staticClass:"center clearfix"},[t._t("center")],2),n("div",{staticClass:"down"},[t._t("down")],2)])},o=[function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"icon"},[n("i",{staticClass:"fa fa-gg-circle ft14"})])}],s={props:{title:{type:String,default:"暂无标题"}},mounted:function(){}},r=s,c=(n("1b45"),n("2877")),a=Object(c["a"])(r,e,o,!1,null,"54f42a66",null);i["a"]=a.exports},"70d4":function(t,i,n){},b730:function(t,i,n){(function(i){!function(i,n){t.exports=n()}(0,function(){"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function o(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function r(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c="PushError:",a={errors:{incompatible:"".concat(c," Push.js is incompatible with browser."),invalid_plugin:"".concat(c," plugin class missing from plugin manifest (invalid plugin). Please check the documentation."),invalid_title:"".concat(c," title of notification must be a string"),permission_denied:"".concat(c," permission request declined"),sw_notification_error:"".concat(c," could not show a ServiceWorker notification due to the following reason: "),sw_registration_error:"".concat(c," could not register the ServiceWorker due to the following reason: "),unknown_interface:"".concat(c," unable to create notification: unknown interface")}},u=function(){function t(i){n(this,t),this._win=i,this.GRANTED="granted",this.DEFAULT="default",this.DENIED="denied",this._permissions=[this.GRANTED,this.DEFAULT,this.DENIED]}return o(t,[{key:"request",value:function(t,i){return arguments.length>0?this._requestWithCallback.apply(this,arguments):this._requestAsPromise()}},{key:"_requestWithCallback",value:function(t,i){var n=this,e=this.get(),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n._win.Notification.permission;void 0===e&&n._win.webkitNotifications&&(e=n._win.webkitNotifications.checkPermission()),e===n.GRANTED||0===e?t&&t():i&&i()};e!==this.DEFAULT?o(e):this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._win.webkitNotifications.requestPermission(o):this._win.Notification&&this._win.Notification.requestPermission?this._win.Notification.requestPermission().then(o).catch(function(){i&&i()}):t&&t()}},{key:"_requestAsPromise",value:function(){var t=this,i=this.get(),n=i!==this.DEFAULT,e=this._win.Notification&&this._win.Notification.requestPermission,o=this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission;return new Promise(function(s,r){var c=function(i){return function(i){return i===t.GRANTED||0===i}(i)?s():r()};n?c(i):o?t._win.webkitNotifications.requestPermission(function(t){c(t)}):e?t._win.Notification.requestPermission().then(function(t){c(t)}).catch(r):s()})}},{key:"has",value:function(){return this.get()===this.GRANTED}},{key:"get",value:function(){return this._win.Notification&&this._win.Notification.permission?this._win.Notification.permission:this._win.webkitNotifications&&this._win.webkitNotifications.checkPermission?this._permissions[this._win.webkitNotifications.checkPermission()]:navigator.mozNotification?this.GRANTED:this._win.external&&this._win.external.msIsSiteMode?this._win.external.msIsSiteMode()?this.GRANTED:this.DEFAULT:this.GRANTED}}]),t}(),f=function(){function i(){n(this,i)}return o(i,null,[{key:"isUndefined",value:function(t){return void 0===t}},{key:"isNull",value:function(t){return null===obj}},{key:"isString",value:function(t){return"string"==typeof t}},{key:"isFunction",value:function(t){return t&&"[object Function]"==={}.toString.call(t)}},{key:"isObject",value:function(i){return"object"===t(i)}},{key:"objectMerge",value:function(t,i){for(var n in i)t.hasOwnProperty(n)&&this.isObject(t[n])&&this.isObject(i[n])?this.objectMerge(t[n],i[n]):t[n]=i[n]}}]),i}(),l=function t(i){n(this,t),this._win=i},h=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l),o(i,[{key:"isSupported",value:function(){return void 0!==this._win.Notification}},{key:"create",value:function(t,i){return new this._win.Notification(t,{icon:f.isString(i.icon)||f.isUndefined(i.icon)||f.isNull(i.icon)?i.icon:i.icon.x32,body:i.body,tag:i.tag,requireInteraction:i.requireInteraction})}},{key:"close",value:function(t){t.close()}}]),i}(),_=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l),o(i,[{key:"isSupported",value:function(){return void 0!==this._win.navigator&&void 0!==this._win.navigator.serviceWorker}},{key:"getFunctionBody",value:function(t){var i=t.toString().match(/function[^{]+{([\s\S]*)}$/);return void 0!==i&&null!==i&&i.length>1?i[1]:null}},{key:"create",value:function(t,i,n,e,o){var s=this;this._win.navigator.serviceWorker.register(e),this._win.navigator.serviceWorker.ready.then(function(e){var r={id:t,link:n.link,origin:document.location.href,onClick:f.isFunction(n.onClick)?s.getFunctionBody(n.onClick):"",onClose:f.isFunction(n.onClose)?s.getFunctionBody(n.onClose):""};void 0!==n.data&&null!==n.data&&(r=Object.assign(r,n.data)),e.showNotification(i,{icon:n.icon,body:n.body,vibrate:n.vibrate,tag:n.tag,data:r,requireInteraction:n.requireInteraction,silent:n.silent}).then(function(){e.getNotifications().then(function(t){e.active.postMessage(""),o(t)})}).catch(function(t){throw new Error(a.errors.sw_notification_error+t.message)})}).catch(function(t){throw new Error(a.errors.sw_registration_error+t.message)})}},{key:"close",value:function(){}}]),i}(),v=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l),o(i,[{key:"isSupported",value:function(){return void 0!==this._win.navigator.mozNotification}},{key:"create",value:function(t,i){var n=this._win.navigator.mozNotification.createNotification(t,i.body,i.icon);return n.show(),n}}]),i}(),d=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l),o(i,[{key:"isSupported",value:function(){return void 0!==this._win.external&&void 0!==this._win.external.msIsSiteMode}},{key:"create",value:function(t,i){return this._win.external.msSiteModeClearIconOverlay(),this._win.external.msSiteModeSetIconOverlay(f.isString(i.icon)||f.isUndefined(i.icon)?i.icon:i.icon.x16,t),this._win.external.msSiteModeActivate(),null}},{key:"close",value:function(){this._win.external.msSiteModeClearIconOverlay()}}]),i}(),p=function(t){function i(){return n(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,l),o(i,[{key:"isSupported",value:function(){return void 0!==this._win.webkitNotifications}},{key:"create",value:function(t,i){var n=this._win.webkitNotifications.createNotification(i.icon,t,i.body);return n.show(),n}},{key:"close",value:function(t){t.cancel()}}]),i}();return new(function(){function t(i){n(this,t),this._currentId=0,this._notifications={},this._win=i,this.Permission=new u(i),this._agents={desktop:new h(i),chrome:new _(i),firefox:new v(i),ms:new d(i),webkit:new p(i)},this._configuration={serviceWorker:"/serviceWorker.min.js",fallback:function(t){}}}return o(t,[{key:"_closeNotification",value:function(t){var i=!0,n=this._notifications[t];if(void 0!==n){if(i=this._removeNotification(t),this._agents.desktop.isSupported())this._agents.desktop.close(n);else if(this._agents.webkit.isSupported())this._agents.webkit.close(n);else{if(!this._agents.ms.isSupported())throw i=!1,new Error(a.errors.unknown_interface);this._agents.ms.close()}return i}return!1}},{key:"_addNotification",value:function(t){var i=this._currentId;return this._notifications[i]=t,this._currentId++,i}},{key:"_removeNotification",value:function(t){var i=!1;return this._notifications.hasOwnProperty(t)&&(delete this._notifications[t],i=!0),i}},{key:"_prepareNotification",value:function(t,i){var n,e=this;return n={get:function(){return e._notifications[t]},close:function(){e._closeNotification(t)}},i.timeout&&setTimeout(function(){n.close()},i.timeout),n}},{key:"_serviceWorkerCallback",value:function(t,i,n){var e=this,o=this._addNotification(t[t.length-1]);navigator&&navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("message",function(t){var i=JSON.parse(t.data);"close"===i.action&&Number.isInteger(i.id)&&e._removeNotification(i.id)}),n(this._prepareNotification(o,i))),n(null)}},{key:"_createCallback",value:function(t,i,n){var e,o=this,s=null;if(i=i||{},e=function(t){o._removeNotification(t),f.isFunction(i.onClose)&&i.onClose.call(o,s)},this._agents.desktop.isSupported())try{s=this._agents.desktop.create(t,i)}catch(e){var r=this._currentId,c=this.config().serviceWorker,a=function(t){return o._serviceWorkerCallback(t,i,n)};this._agents.chrome.isSupported()&&this._agents.chrome.create(r,t,i,c,a)}else this._agents.webkit.isSupported()?s=this._agents.webkit.create(t,i):this._agents.firefox.isSupported()?this._agents.firefox.create(t,i):this._agents.ms.isSupported()?s=this._agents.ms.create(t,i):(i.title=t,this.config().fallback(i));if(null!==s){var u=this._addNotification(s),l=this._prepareNotification(u,i);f.isFunction(i.onShow)&&s.addEventListener("show",i.onShow),f.isFunction(i.onError)&&s.addEventListener("error",i.onError),f.isFunction(i.onClick)&&s.addEventListener("click",i.onClick),s.addEventListener("close",function(){e(u)}),s.addEventListener("cancel",function(){e(u)}),n(l)}n(null)}},{key:"create",value:function(t,i){var n,e=this;if(!f.isString(t))throw new Error(a.errors.invalid_title);return n=this.Permission.has()?function(n,o){try{e._createCallback(t,i,n)}catch(t){o(t)}}:function(n,o){e.Permission.request().then(function(){e._createCallback(t,i,n)}).catch(function(){o(a.errors.permission_denied)})},new Promise(n)}},{key:"count",value:function(){var t,i=0;for(t in this._notifications)this._notifications.hasOwnProperty(t)&&i++;return i}},{key:"close",value:function(t){var i;for(i in this._notifications)if(this._notifications.hasOwnProperty(i)&&this._notifications[i].tag===t)return this._closeNotification(i)}},{key:"clear",value:function(){var t,i=!0;for(t in this._notifications)this._notifications.hasOwnProperty(t)&&(i=i&&this._closeNotification(t));return i}},{key:"supported",value:function(){var t=!1;for(var i in this._agents)this._agents.hasOwnProperty(i)&&(t=t||this._agents[i].isSupported());return t}},{key:"config",value:function(t){return(void 0!==t||null!==t&&f.isObject(t))&&f.objectMerge(this._configuration,t),this._configuration}},{key:"extend",value:function(t){var i,n={}.hasOwnProperty;if(!n.call(t,"plugin"))throw new Error(a.errors.invalid_plugin);for(var e in n.call(t,"config")&&f.isObject(t.config)&&null!==t.config&&this.config(t.config),i=new(0,t.plugin)(this.config()),i)n.call(i,e)&&f.isFunction(i[e])&&(this[e]=i[e])}}]),t}())("undefined"!=typeof window?window:i)})}).call(this,n("c8ba"))}}]);
//# sourceMappingURL=chunk-a1f72220.70b44f66.js.map